<main class="max-w-2xl mx-auto flex flex-col items-center justify-center px-4 py-12 gap-4">
    <h2 class="text-xl font-normal text-center">Administrar Tipo de Receptores de Notificación</h2>
    <table class="w-full table-auto border-collapse rounded">
        <thead>
            <tr>
                <th class="border w-8 md:w-10">ID</th>
                <th class="border">Nombre</th>
                <th class="border w-20 md:w-25">Vigencia</th>
                <th class="border w-30 md:w-60">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @if (cargando()) {
            <tr>
                <td colspan="4" class="border text-center p-3">
                    <div class="flex justify-center-safe">
                        <div>
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="size-6 transform animate-spin"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"
                                />
                            </svg>
                        </div>
                        <p class="ml-3">Cargando...</p>
                    </div>
                </td>
            </tr>
            } @else { @if (error()) {
            <tr>
                <td colspan="4" class="border text-center p-3">{{ error() }}</td>
            </tr>
            } @else { @for (tipoReceptor of tiposReceptoresNotificacion(); track tipoReceptor.id) {
            <tr>
                <td class="border text-center">{{ tipoReceptor.id }}</td>
                <td class="border text-center">{{ tipoReceptor.nombre }}</td>
                <td class="border text-center">
                    {{ tipoReceptor.vigencia ? 'Vigente' : 'No vigente' }}
                </td>
                <td class="border">
                    <div
                        class="flex flex-col md:flex-row items-center justify-center-safe gap-1 md:gap-3"
                    >
                        <button
                            class="w-25 bg-blue-600/90 hover:bg-blue-600 text-white py-1 rounded mt-2 md:mb-2 hover:cursor-pointer hover:scale-102 active:scale-98"
                            (click)="openModalEditar(tipoReceptor)"
                        >
                            Editar
                        </button>
                        <button
                            class="w-25 bg-red-700/90 hover:bg-red-700 text-white py-1 rounded mb-2 md:mt-2 hover:cursor-pointer hover:scale-102 active:scale-98"
                            (click)="openModalEliminar(tipoReceptor)"
                        >
                            Eliminar
                        </button>
                    </div>
                </td>
            </tr>
            } @empty {
            <tr>
                <td colspan="4" class="border text-center p-3">
                    No existen tipos de receptores de notificación registrados
                </td>
            </tr>
            } } }
        </tbody>
    </table>
    <button
        class="w-35 bg-blue-600/90 hover:bg-blue-600 text-white py-1 rounded my-1 ml-auto hover:cursor-pointer hover:scale-102 active:scale-98"
        (click)="openModalCrear()"
    >
        Crear Nuevo
    </button>
</main>

@if (showModalEliminar()) {
<app-modal-eliminacion
    [item]="itemSeleccionado()"
    titulo="Eliminar un tipo de receptor:"
    [descripcion]="`¿Seguro que deseas eliminar el tipo de receptor de notificación (${itemSeleccionado()?.id} - ${itemSeleccionado()?.nombre})?`"
    (cerrar)="closeModalEliminar()"
    (eliminar)="eliminar($event)"
>
</app-modal-eliminacion>
} @if (showModalEditar()) {
<app-modal-edicion
    [campos]="camposEdicion()"
    [item]="itemSeleccionado()"
    titulo="Editar un tipo de receptor:"
    (cerrar)="closeModalEditar()"
    (editar)="editar($event)"
>
</app-modal-edicion>
} @if (showModalCrear()) {
<app-modal-edicion
    [campos]="camposCreacion()"
    [item]="itemSeleccionado()"
    titulo="Crear un tipo de receptor:"
    (cerrar)="closeModalCrear()"
    (editar)="crear($event)"
>
</app-modal-edicion>
}
